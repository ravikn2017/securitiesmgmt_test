# Railway deployment configuration for Node.js + Python backend
[phases.setup]
nixPkgs = [
  "nodejs",
  "python311",
  "python311Packages.numpy",
  "python311Packages.pandas", 
  "python311Packages.requests",
  "python311Packages.openpyxl",
  "python311Packages.yfinance",
  "python311Packages.beautifulsoup4",
  "python311Packages.lxml",
  "python311Packages.html5lib",
  "python311Packages.multitasking",
  "python311Packages.frozendict",
  "python311Packages.urllib3",
  "python311Packages.certifi",
  "python311Packages.charset-normalizer",
  "python311Packages.idna"
]

[phases.install]
cmds = [
  "cd backend && npm install",
  "python3 -c 'import sys; print(f\"Python path: {sys.path}\")' || echo 'Python check failed'",
  "python3 -c 'import yfinance; print(\"yfinance available\")' || echo 'yfinance not found'"
]

[phases.build]
cmds = ["cd backend"]

[start]
cmd = "cd backend && npm start"
