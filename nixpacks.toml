# Railway deployment configuration for Node.js + Python backend
[phases.setup]
nixPkgs = [
  "nodejs",
  # Create Python environment with all required packages
  "(python311.withPackages (ps: with ps; [
    numpy
    pandas
    requests
    openpyxl
    yfinance
    beautifulsoup4
    lxml
    html5lib
    multitasking
    frozendict
    urllib3
    certifi
    charset-normalizer
    idna
  ]))"
]

[phases.install]
cmds = [
  "cd backend && npm install",
  "python3 -c 'import sys; print(f\"Python path: {sys.path}\")' || echo 'Python check failed'",
  "python3 -c 'import yfinance; print(\"yfinance available\")' || echo 'yfinance not found'"
]

[phases.build]
cmds = ["cd backend"]

[start]
cmd = "cd backend && npm start"
